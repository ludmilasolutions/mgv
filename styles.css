/* =============================================================================
   MGV – UI (legibilidad + banners + carrito con resumen único)
   ============================================================================= */
:root{
  --bg:#ffffff; --card:#f7f7f8; --text:#0b1220; --muted:#475569; --border:#e2e8f0;
  --brand:#0ea5e9; --accent:#f59e0b;
}
*{box-sizing:border-box}
html,body{height:100%}
html{scroll-behavior:smooth}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;color:var(--text);background:var(--bg);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
img{max-width:100%;display:block}
a{text-decoration:none;color:inherit}
button{font:inherit}
.container{max-width:1100px;margin:0 auto;padding:16px}
:focus-visible{outline:3px solid rgba(14,165,233,.45);outline-offset:2px;border-radius:8px}

/* Topbar */
.topbar{position:sticky;top:0;z-index:30;background:#fff;border-bottom:1px solid var(--border);backdrop-filter:saturate(180%) blur(10px)}
.header.container{display:flex;align-items:center;gap:14px;flex-wrap:wrap}
.header.container>img{width:auto;height:auto;max-height:64px;border-radius:12px;box-shadow:0 1px 0 #0000000a}
@media (max-width:680px){.header.container>img{max-height:48px}}
.header .title{font-weight:800;font-size:clamp(20px,3vw,28px)}
.search{flex:1;min-width:240px}
.search input#q{width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:14px;outline:none;background:#fff;color:var(--text)}
.search input#q::placeholder{color:#94a3b8}
.search input#q:focus{border-color:var(--brand);box-shadow:0 0 0 4px rgba(14,165,233,.12)}

/* Categorías */
#categoryPills{display:flex;gap:10px;flex-wrap:wrap;margin:14px 0 8px}
.badge{border:1px solid var(--border);background:#fff;color:#0b1220;padding:8px 12px;border-radius:999px;cursor:pointer;transition:all .2s ease}
.badge:hover{transform:translateY(-1px);border-color:var(--brand)}
.badge.active{background:var(--brand);color:#fff;border-color:var(--brand)}

/* Grid Productos */
.grid#productGrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;transition:transform .18s ease,box-shadow .18s ease}
.card:hover{transform:translateY(-3px);box-shadow:0 10px 28px rgba(2,6,23,.1)}
.card img{width:100%;aspect-ratio:4/3;object-fit:cover}
.card .body{padding:12px}
.card .name{font-weight:700;margin-bottom:6px}
.card .desc{color:var(--muted);font-size:.95rem;min-height:2.4em}
.card .row{display:flex;align-items:center;justify-content:space-between;margin-top:10px}
.price{font-weight:800}
.btn{border:none;background:var(--accent);color:#111;padding:10px 14px;border-radius:12px;cursor:pointer;transition:transform .05s ease,filter .2s ease;box-shadow:0 2px 0 rgba(0,0,0,.08)}
.btn:hover{filter:brightness(1.02)}
.btn:active{transform:translateY(1px)}
.btn.secondary{background:#eef2f7;color:#111}

/* Banners */
.carousel{position:relative;border-radius:16px;overflow:hidden;margin:12px 0}
.banner{position:relative;display:none}
.banner.active{display:block}
.banner img{width:100%;height:260px;object-fit:cover;display:block;filter:saturate(1.05)}
.banner .content{position:absolute;inset:auto 0 0 0;padding:18px;color:#fff;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.55) 85%);text-shadow:0 1px 1px rgba(0,0,0,.3)}
.banner .title{font-weight:900;font-size:clamp(18px,3.2vw,26px);letter-spacing:.2px}
.banner .text{opacity:.95}
.dots{position:absolute;right:14px;bottom:14px;display:flex;gap:8px}
.dot{width:8px;height:8px;border-radius:50%;background:#fff7;border:1px solid #fff9;cursor:pointer}
.dot.active{background:#fff}

/* Modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,.45);padding:20px;z-index:50}
.sheet{background:#fff;border-radius:16px;max-width:760px;width:100%;overflow:hidden;display:grid;grid-template-columns:1fr 1.2fr}
.sheet img{width:100%;height:100%;object-fit:cover}
.sheet .content{padding:16px;position:relative}
.close-x{position:absolute;top:12px;right:12px;background:#000;color:#fff;border:none;border-radius:999px;width:32px;height:32px;display:grid;place-items:center;cursor:pointer}

/* =============================================================================
   CARRITO – más alto en móvil, header y footer sticky, resumen más grande
   ============================================================================= */
#shipPriceWrap{display:none !important;}
.cart-fab,#cartFab{
  position:fixed;right:16px;bottom:16px;width:56px;height:56px;border-radius:16px;border:none;cursor:pointer;z-index:60;
  display:grid;place-items:center;background:linear-gradient(180deg,#111,#0b1220);color:#fff;box-shadow:0 14px 30px rgba(2,6,23,.28),0 1px 0 rgba(255,255,255,.08) inset;font-size:22px;line-height:1;padding:0
}
.cart-fab:active{transform:translateY(1px)}
.cart-fab span#cartCount{position:absolute;right:-6px;top:-6px;min-width:22px;height:22px;padding:0 6px;border-radius:999px;background:var(--accent);color:#111;font-weight:900;display:inline-grid;place-items:center;font-size:12px;box-shadow:0 2px 0 rgba(0,0,0,.15)}

.cart-panel{
  position:fixed;left:auto;right:16px;
  top:calc(8px + env(safe-area-inset-top, 0px));   /* más espacio útil */
  bottom:12px;
  width:380px;
  background:#fff;border:1px solid var(--border);border-radius:16px;
  display:flex;flex-direction:column; /* para que el resumen pueda crecer */
  z-index:55;box-shadow:0 20px 50px rgba(2,6,23,.18);
  overflow-y:auto;overflow-x:hidden;color:#0b1220;scroll-behavior:smooth;
  -webkit-overflow-scrolling:touch;
}
@media (max-width:680px){
  .cart-panel{
    left:8px;right:8px;width:auto;
    top:calc(8px + env(safe-area-inset-top, 0px));
    bottom:calc(8px + env(safe-area-inset-bottom, 0px));
  }
}

/* Header del carrito: sticky con X grande */
.cart-header{
  position:sticky;top:0;z-index:3;
  display:flex;justify-content:center;align-items:center;gap:12px;
  padding:14px 56px 14px 14px; /* espacio para la X */
  border-bottom:1px solid var(--border);background:linear-gradient(180deg,#fff,#fafafa);
  box-shadow:0 2px 8px rgba(2,6,23,.04)
}
.cart-header strong{font-size:1.05rem;letter-spacing:.2px;color:#0b1220}
.close-btn{
  position:absolute;right:12px;top:10px;z-index:4;
  width:38px;height:38px;border-radius:999px;
  background:#fff;border:1px solid var(--border);color:#0b1220;
  display:grid;place-items:center;cursor:pointer;font-size:18px;line-height:1;
}
.close-btn:hover{background:#f8fafc}

/* Contenido superior */
.cart-top{margin:10px 14px 6px;display:flex;flex-direction:column;gap:10px}
.cart-top .field label{font-weight:700;color:#0b1220}
.cart-top .field input{padding:12px 14px;border:1px solid var(--border);border-radius:12px;font-size:1.05rem;min-height:48px}
.segmented{display:flex;gap:6px;background:#fff;border:1px solid var(--border);border-radius:12px;padding:6px}
.segmented .seg{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;border:none;background:transparent;padding:12px;border-radius:10px;cursor:pointer;color:#0b1220;font-weight:700;transition:all .15s ease;min-height:44px}
.segmented .seg.active{background:#f8fafc;border:1px solid var(--border);box-shadow:0 1px 0 rgba(0,0,0,.05)}

/* Resumen: crece y muestra más productos */
.cart-summary{
  padding:12px 14px 6px;border-top:1px solid var(--border);border-bottom:1px solid var(--border);background:#fff;
  flex:1 1 auto;     /* ocupa todo el espacio disponible */
  min-height:0;      /* permite que el contenedor flex calcule bien */
}
.cart-summary .sum-title{font-weight:800;font-size:1.05rem;margin-bottom:8px;color:#0b1220}
.cart-summary .sum-grid{list-style:none;margin:0;padding:0;display:grid;grid-auto-rows:minmax(64px,auto);row-gap:12px}
.cart-summary .sum-item{display:grid;grid-template-columns:64px minmax(0,1fr) auto;align-items:center;gap:12px}
.cart-summary .sum-item img{width:64px;height:64px;border-radius:10px;object-fit:cover;border:1px solid var(--border)}
.cart-summary .sum-name{font-weight:800;color:#0b1220;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.cart-summary .sum-qty{font-size:1rem;color:#475569}
.sum-actions{display:flex;align-items:center;gap:8px;justify-self:end;white-space:nowrap}
.qty-group{display:inline-flex;align-items:center;gap:6px;background:#ffffff;border:1px solid var(--border);border-radius:12px;padding:3px}
.qty-group .btn,.sum-actions .btn[data-del]{background:#f1f5f9 !important;color:#0f172a;box-shadow:none;border:none;padding:8px 10px;border-radius:10px}
.qty-group .btn:hover,.sum-actions .btn[data-del]:hover{background:#e2e8f0}
.cart-summary .sum-empty{color:#64748b}

/* Más compacto en móvil para que entren más ítems a la vista */
@media (max-width:680px){
  .cart-summary .sum-grid{row-gap:8px}
  .cart-summary .sum-item{grid-template-columns:56px minmax(0,1fr) auto;gap:10px}
  .cart-summary .sum-item img{width:56px;height:56px}
}

/* Footer / total / checkout: sticky abajo */
.cart-footer{
  position:sticky;bottom:0;z-index:3;
  padding:12px 14px 16px;border-top:1px solid var(--border);
  display:flex;flex-direction:column;gap:10px;background:#fff;color:#0b1220;
  box-shadow:0 -6px 12px rgba(2,6,23,.04);
  padding-bottom:calc(16px + env(safe-area-inset-bottom, 0px)); /* evita corte en iOS */
}
.cart-breakdown{display:flex;flex-direction:column;gap:6px;margin:4px 0 0}
.cart-breakdown .row{display:flex;justify-content:space-between;color:#334155}
.cart-total{display:flex;justify-content:space-between;align-items:center;padding-top:8px;border-top:1px dashed var(--border)}
#cartTotal{font-size:1.25rem;font-weight:900;color:#0b1220}
#checkoutBtn{width:100%;background:linear-gradient(180deg,#fbbf24,#f59e0b);border:none;color:#111;font-weight:800;padding:12px 16px;border-radius:12px;box-shadow:0 6px 16px rgba(245,158,11,.35)}

/* Promo / Footer */
.promo-card{display:grid;gap:12px;background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px}
.promo-header h3{margin:0 0 6px}
.promo-badges{display:flex;flex-wrap:wrap;gap:8px}
.promo-pill{background:#fff;border:1px solid var(--border);border-radius:999px;padding:6px 10px}
.promo-actions{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.promo-btn{display:inline-flex;align-items:center;justify-content:center;min-height:40px}
.footer{color:var(--muted);font-size:.95rem;padding:24px 0}
